<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>前后鼻音常见字列表</title>
<style type="text/css">
.entry-content{width:60%;margin:3rem auto;}
.entry-content p {font-size:28px;letter-spacing:2px;}
.entry-content a {
  opacity: 1;
  text-decoration: none;
  border-bottom: 2px solid;
  border-color: rgba(255, 255, 255, 0.6);
}
.entry-content a:hover {
  opacity: .6;
  text-decoration: none;
  border-color: rgba(255, 255, 255, 0.4);
}
.wp-block-buttons{text-align: center;margin-top:8rem;}
.wp-block-button__link {
    background-color: #32373c;
    border-radius: 9999px;
    box-shadow: none;
    box-sizing: border-box;
    color: #fff;
    cursor: pointer;
    display: inline-block;
    font-size: 1.125em;
    padding: calc(.667em + 2px) calc(1.333em + 2px);
    margin: 2rem;
    text-align: center;
    text-decoration: none;
    word-break: break-word
}

.wp-block-button__link:active,.wp-block-button__link:focus,.wp-block-button__link:hover,.wp-block-button__link:visited {
    color: #fff
}
</style>
</head>
<body>
<div class="entry-content">
            
<div class="wp-block-buttons">
    <div class="wp-block-button"><a class="wp-block-button__link" href="javascript:beginTest()">打乱测验</a></div>
</div>
<p>bin 宾,滨,鬓,斌,彬</p>
<p>bing 并,饼,屏(屏息),丙,柄,炳,病,禀,冰,兵,秉</p>
<p>ben 本,奔,笨</p>
<p>beng 崩,蹦,绷,甭,泵,迸</p>
<p>cen 岑,涔,参(参差)</p>
<p>ceng 曾(曾经),蹭,层</p>
<p>chen 陈,臣,沉,称(对称),尘,趁,晨,嗔,琛,谶,衬</p>
<p>cheng 成,城,诚,称(名称),程,乘,承,撑,丞,澄,橙,呈,逞,惩,骋</p>
<p>din</p>
<p>ding 丁,顶,订,盯,钉,叮,定,碇,鼎</p>
<p>den</p>
<p>deng 登,瞪,凳,等,邓,灯</p>
<p>en 恩,嗯</p>
<p>fen 分,份,粉,纷,氛,忿,芬,焚,坟,奋,愤,粪</p>
<p>feng 风,枫,疯,讽,峰,锋,逢,蜂,缝,凤,奉,丰,封,冯</p>
<p>gen 艮,根,跟,亘</p>
<p>geng 更,梗,埂,鲠,耿,庚,耕,羹</p>
<p>hen 很,恨,狠,痕</p>
<p>heng 亨,哼,横,恒,衡,行(道行)</p>
<p>jin 斤,靳,近,今,矜,金,仅,浸,津,巾,锦,尽,进,晋,禁,紧,谨,劲(费劲),筋</p>
<p>jing 茎,径,京,景,惊,鲸,荆,敬,晶,睛,菁,精,靖,静,井,阱,警,经,劲(强劲),颈,净,竞,竟,境,镜,兢</p>
<p>ken 肯,啃,恳,垦</p>
<p>keng 坑,吭</p>
<p>lin 林,琳,霖,淋,麟,磷,粼,吝,蔺,临,拎,邻</p>
<p>ling 令,玲,岭,凌,零,聆,铃,羚,瓴,领,翎,龄,伶,另,灵,陵,菱,绫</p>
<p>len</p>
<p>leng 冷,愣,楞,棱</p>
<p>min 民,抿,泯,敏,闽,闵,悯,皿</p>
<p>ming 名,明,命,鸣,铭,冥,暝</p>
<p>men 门,们,闷</p>
<p>meng 孟,猛,盟,梦,蒙,萌,懵</p>
<p>nen 嫩</p>
<p>neng 能</p>
<p>nin 您</p>
<p>ning 宁,拧,泞,凝</p>
<p>pin 拼,品,贫,频,嫔,聘</p>
<p>ping 平,评,萍,坪,苹,凭,瓶,屏(屏幕),娉</p>
<p>pen 喷,盆</p>
<p>peng 朋,鹏,棚,彭,澎,碰,捧,蓬,篷,烹,砰,抨,怦</p>
<p>qin 禽,擒,侵,寝,亲(亲人),勤,琴,芹,秦,钦</p>
<p>qing 青,清,蜻,情,晴,请,顷,倾,轻,氢,亲(亲家),庆</p>
<p>tin</p>
<p>ting 厅,汀,亭,停,廷,艇,霆,挺,庭,听</p>
<p>ten</p>
<p>teng 疼,腾,藤,滕</p>
<p>ren 人,认,任,仁,刃,忍,壬</p>
<p>reng 仍,扔</p>
<p>sen 森</p>
<p>seng 僧</p>
<p>shen 申,伸,审,神,砷,呻,婶,身,甚,慎,肾,什,深,沈,参(人参),渗,莘,蜃</p>
<p>sheng 生,胜,笙,牲,甥,升,昇,声,省(省力),圣,盛,剩,绳</p>
<p>zen 怎</p>
<p>zeng 曾(曾祖父),增,赠,憎</p>
<p>zhen 真,镇,珍,针,阵,振,震,枕,朕,诊,贞,侦,帧,甄,斟,臻,鸩,箴</p>
<p>zheng 正,证,政,症,怔,征,整,争,挣,铮,筝,蒸,拯,郑</p>
<p>yin 因,姻,茵,引,阴,垠,银,尹,隐,音,印,饮,殷,吟,寅,淫,瘾,荫</p>
<p>ying 应,英,影,营,萦,萤,莹,莺,硬,迎,鹰,赢,婴,樱,映,盈,颖,蝇</p>
<p>xin 心,芯,新,欣,薪,鑫,辛,馨,信,衅</p>
<p>xing 星,醒,腥,猩,形,型,刑,姓,性,行(行走),兴,幸,杏,省(反省)</p>
<p>wen 文,纹,雯,蚊,紊,问,闻,温,吻,稳</p>
<p>weng 翁,嗡,瓮</p>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-migrate@3.3.2/dist/jquery-migrate.min.js"></script>
<script>
var allWords={},checkWords=[],curIndex=0,errArr=[];
var beginBtn=document.querySelector(".wp-block-buttons");
var curBody=document.createElement("div");
curBody.className = "wp-block-buttons";
document.querySelector(".entry-content").appendChild(curBody);
jQuery('<style>').html('p.selected{background-color:lightgrey;}').appendTo(jQuery('head'));
jQuery(".entry-content").on('click', "p", function(){
  jQuery(this).toggleClass("selected"); 
})

function beginTest(){
 beginBtn.style.display="none";
 [].forEach.call(document.querySelectorAll(".entry-content>p"),function(e){
  var curStr = e.innerHTML;
  var curStrArr = curStr.split(/\s+/);
  allWords[curStrArr[0]]=curStrArr[1]?curStrArr[1].split(/[,，]/):[];
  e.style.display="none";
 });
 getWords();
 getBtnHTML();
}

function getElementPagePosition(element){
  //计算x坐标
  var actualLeft = element.offsetLeft;
  var current = element.offsetParent;
  while (current !== null){
    actualLeft += current.offsetLeft;
    current = current.offsetParent;
  }
  //计算y坐标
  var actualTop = element.offsetTop;
  var current = element.offsetParent;
  while (current !== null){
    actualTop += (current.offsetTop+current.clientTop);
    current = current.offsetParent;
  }
  //返回结果
  return {x: actualLeft, y: actualTop}
}

function checkNNext(pinyin){
 var word=checkWords[curIndex];
 if(pinyin!=word[0]){
  errArr.push(word);
  var elepos = getElementPagePosition(curBody);
  var x = elepos.x, y = elepos.y;
  var $i = jQuery("<span/>").text(word);
  $i.css({"z-index" : 999999999,
    "top" : y + 250,
    "left" : x + 300,
    "position" : "absolute",
    "font-weight" : "bold",
    "font-size" : "50px",
    "color" : "#ff6651"
  });
  jQuery("body").append($i);
  $i.animate({
    //将原来的位置向上移动180
    "top" : y - 180,
    "opacity" : 0
    //1500动画的速度
  }, 2500, function() {
    //时间到了自动删除
    $i.remove();
  });
 }
 curIndex++;
 if(curIndex >= checkWords.length){
  var errHTML="";
  errArr.forEach(function(e){
   errHTML+="<a class='wp-block-button__link'>"+e[1]+" "+e[0]+"</a>";
  });
  var baseScore = Math.floor(100/checkWords.length);
  curBody.innerHTML = "<h1>得分："+(100-Math.floor(baseScore*errArr.length))+"分 错误"+errArr.length+"个：</h1>"+errHTML+"<a class='wp-block-button__link' href='javascript:refresh()' style='background-color:red'>重新开始</a>";
  return;
 }
 getBtnHTML();
}

function refresh(){
 beginBtn.style.display = "";
 curBody.innerHTML = "";
 [].forEach.call(document.querySelectorAll(".entry-content>p"),function(e){
  e.style.display="";
 });
}

function getBtnHTML(){
 var word=checkWords[curIndex];
 var pinyin=word[0].replace(/g$/,"");
 var rtn="<h1>"+word[1]+"：</h1>"+"<a class='wp-block-button__link' href='javascript:checkNNext(\""+pinyin+"\")'>"+pinyin+"</a>"+"<a class='wp-block-button__link' href='javascript:checkNNext(\""+pinyin+"g\")'>"+pinyin+"g</a>";
 curBody.innerHTML=rtn;
}

function getWords(num=20){
 curIndex = 0;
 checkWords = [];
 errArr=[];
 var tempWords=[];
 if(document.querySelector(".entry-content>p.selected") != null){
  [].forEach.call(document.querySelectorAll(".entry-content>p.selected"),function(e){
   var curStr = e.innerHTML;
   var curStrArr = curStr.split(/\s+/);
   if(curStrArr[1]){
    curStrArr[1].split(/[,，]/).forEach(function(w){
     tempWords.push([curStrArr[0],w]);
    });
   }
  });
 }else{
  for (let i in allWords) {
   allWords[i].forEach(function(w){
    tempWords.push([i,w]);
   });
  }
 }
 for (var i=0; i<num; i++) {
  if(tempWords.length < 1)continue;
  var index=Math.floor(Math.random() * tempWords.length);
  checkWords.push(tempWords.splice(index,1)[0]);
 }
}
</script>
</div><!-- .entry-content -->
</body>
</html>